<script id="tpl_content" type="text/html">

    <div id="header">
        <h1 class="uk-width-1-1">
            <span class="uk-icon-globe"></span>
            {{app.title}}
            <span class="uk-h6"><small><a href="{{wms_url_complete}}" target="_blank">[{{wms_url}}]</a></small></span>
            <span class="uk-h6 uk-align-right uk-margin"><small>{{app.name}} {{app.version}} - (c) Guillaume Ryckelynck / CIGAL 2014 </small></span>
        </h1>

        <nav class="uk-navbar uk-margin-bottom">
            <div class="uk-navbar-content uk-margin-remove uk-width-small-1-1 uk-width-medium-2-3">
                <form class="uk-form uk-margin-remove uk-display-inline-block uk-width-9-10">
                    <input id="txt_search" type="text" placeholder="Search" value="{{txt_search}}" class="uk-width-8-10"></input>
                    <button class="bt_onSearch uk-button uk-button-primary uk-button-small uk-width-1-10 uk-hidden-small uk-margin-remove">
                        Submit
                    </button>
                </form>
            </div>
            <div id="navbar_buttons" class="uk-navbar-flip">                    
                <ul class="uk-navbar-nav">
                    <li><a href="gridView" class="bt_onChangeView uk-hidden"><span class="uk-icon-th"></span></a></li>
                    <li><a href="listView" class="bt_onChangeView"><span class="uk-icon-th-list"></span></a></li>
                </ul>
                <ul class="uk-navbar-nav">
                    <li class="uk-parent " data-uk-dropdown="{mode:'click'}">
                        <a><i class="uk-icon-globe"></i></a>
                        <div class="uk-dropdown uk-dropdown-navbar uk-dropdown-small">
                            <ul class="uk-nav uk-nav-navbar">
                                {{#wms_list.wms}}
                                <li>
                                    <a href="{{url}}" class="bt_onChangeCSW">
                                        <strong>{{title}}</strong><br />
                                        {{description}}
                                    </a>
                                </li>
                                {{/wms_list.wms}}
                                <li class="uk-margin-left uk-margin-small-top">
                                    <form id="form_cswurl" class="uk-form">
                                        <input id="txt_wmsurl" type="text" placeholder="http://..." class="uk-width-9-10" value="{{csw_url}}" />
                                        <button class="uk-button bt_onGetCSW" href="#" >
                                            <i class="uk-icon-globe"></i>
                                        </button>
                                    </form>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
                <ul class="uk-navbar-nav">
                    <li><a href="#window-service" data-uk-modal><span class="uk-icon-sitemap"></span></a></li>
                </ul>
            </div>
        </nav>
    </div>
    <div class="uk-width-1-1">
        <ul id="switcher-content" class="">
            <li class="switchView">
                <div id="md_grid" class="uk-grid" data-uk-grid-margin data-uk-grid-match="{row: false}">
                    {{#layer}}
                    <div style="" class="md_grid_item uk-margin-small-bottom">
                        <!--{{#mdReader_url}}
                            href="{{mdReader_url}}?url={{csw_url}}&id={{MD_FileIdentifier}}" class="bt_onViewMd" target="_blank"
                        {{/mdReader_url}}-->
                        <a
                        href="#window-{{Name}}" data-uk-modal
                        style="color:#444" data-uk-tooltip="{pos:'bottom'}"
                        title="
                        <div style='text-align:left;'>
                            <div><strong>Nom:</strong> {{Name}}</div>
                            <div><strong>Résumé:</strong> {{Abstract}}</div>
                            <div>
                                <strong>Mot-clés:</strong>
                                {{#Keywords}}
                                    {{Layer_Keyword}},
                                {{/Keywords}}
                            </div>
                        </div>
                        ">
                            <span style="font-size:1.1em;"><strong>{{Title}}</strong></span>
                        </a>
                        <div class="uk-thumbnail">
                            <!--<img width="200" src="{{Data_BrowseGraphics.Data_BrowseGraphic_Name}}" alt="" style="max-height:200px; max-width:200px;">-->
                            <img width="200" src="{{ImgURL}}" alt="" style="max-height:200px; max-width:200px;">
                        </div>
                    </div>
                    {{/layer}}
                </div>
            </li>    
            <li class="switchView uk-hidden">
                <div id="md_list">
                    {{#layer}}
                    <div class="uk-grid uk-grid-preserve" data-uk-grid-margin>
                        <div class="uk-width-medium-1-6 uk-thumbnail">
                            <!--<img width="220" height="" src="{{Data_BrowseGraphics.Data_BrowseGraphic_Name}}" alt="">-->
                            <img src="{{ImgURL}}" alt="" style="max-height:200px;">
                        </div>
                        <div class="uk-width-medium-5-6">
                            <h2 class="uk-h4"><strong><a href=#>{{Title}}</a></strong></h2>
                            <p>{{Abstract}}</p>
                            <div style="height:2em;">
                                <p>
                                    {{#Keywords}}
                                        <em>{{Layer_Keyword}}</em>,
                                        {{Keyword}}
                                    {{/Keywords}}
                                    <!--<br />-->
                                </p>
                            </div>
                        </div>
                    </div>
                    <hr class="uk-grid-divider"/>
                    {{/layer}}
                </div>
            </li>
        </ul>
    </div>
    <div id="footer" class="">
        <nav id="nav_footer" class="uk-navbar uk-margin-small-top uk-width-1-1">
            <ul class="uk-navbar-nav uk-width-1-2">
                <!--
                <li><a href="#" class="">Test 1</a></li>
                <li><a href="#" class="">Test 2</a></li>
                -->
                <li class="uk-parent" data-uk-dropdown="{mode:'click'}">
                    <a>
                        Fiches par page: {{itemsOnPage}}
                        <i class="uk-icon-caret-up"></i>
                    </a>
                    <div class="uk-dropdown uk-dropdown-navbar uk-dropdown-up uk-dropdown-small" style="">
                        <ul class="uk-nav uk-nav-navbar">
                            <li>
                                <a href="10" class="bt_onChangeItemsOnPage">10</a>
                            </li>
                            <li>
                                <a href="25" class="bt_onChangeItemsOnPage">25</a>
                            </li>
                            <li>
                                <a href="50" class="bt_onChangeItemsOnPage">50</a>
                            </li>
                            <li>
                                <a href="100" class="bt_onChangeItemsOnPage">100</a>
                            </li>
                            <li>
                                <a href="250" class="bt_onChangeItemsOnPage">250</a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="uk-margin-small">
                    <ul id="pagination" class="uk-pagination uk-pagination-left" data-uk-pagination="{items:{{nb_records_matched}}, itemsOnPage:{{itemsOnPage}}, currentPage:{{currentPage}}}"></ul>
                </li>
            </ul>
            <div class="uk-navbar-flip uk-width-1-2">
                <div class="uk-align-right uk-navbar-content uk-margin-remove">Présentation de {{nb_records_returned}} résultats sur {{nb_records_matched}}.</div>
            </div> 
        </nav>
    </div>
    <div id="window-service" class="uk-modal">
        <div class="uk-modal-dialog">
            <a class="uk-modal-close uk-close"></a>
            <h3 class="uk-h4"><strong>Description du service</strong></h3>
            <div><strong>Nom du service:</strong> <code>{{service.Service_Name}}</code></div>
            <div><strong>Titre du service:</strong> <code>{{service.Service_Title}}</code></div>
            <div><strong>Mots-clés:</strong>
                {{#service.Service_Keywords}}
                    <code>{{Service_Keyword}}</code>, 
                {{/service.Service_Keywords}}
            </div>
            <div><strong>URL du service:</strong> <code>{{service.Service_OnlineResource}}</code></div>
            <h3 class="uk-h4">Contacts pour le service</h3>
            <div class="uk-grid uk-panel uk-grid-small uk-panel-box" style="margin-left: 5px;">
                <div class="uk-width-1-2">    
                    {{#service.Service_ContactPerson}}<div><strong>Nom: {{service.Service_ContactPerson}}</strong></div>{{/service.Service_ContactPerson}}
                    {{#service.Service_ContactOrganization}}<div>Organisme: {{service.Service_ContactOrganization}}</div>{{/service.Service_ContactOrganization}}
                    {{#service.Service_ContactPosition}}<div>Fonction: {{service.Service_ContactPosition}}</div>{{/service.Service_ContactPosition}}
                </div>
                <div class="uk-width-1-2"> 
                    {{#service.Service_AddressType}}<div>Type d'adresse: {{service.Service_AddressType}}</div>{{/service.Service_AddressType}}
                    {{#service.Service_Address}}
                        <div>Adresse: {{service.Service_Address}}, {{service.Service_PostCode}} {{service.Service_City}} {{service.Service_Country}}</div>
                    {{/service.Service_Address}}
                    {{#service.Service_ContactVoiceTelephone}}<div>Téléphone: {{service.Service_ContactVoiceTelephone}}</div>{{/service.Service_ContactVoiceTelephone}}
                    {{#service.Service_ContactElectronicMailAddress}}<div>Email: <a href="mailto:{{service.Service_ContactElectronicMailAddress}}">{{service.Service_ContactElectronicMailAddress}}</a></div>{{/service.Service_ContactElectronicMailAddress}}
                </div>
            </div>
            <h3 class="uk-h4">Droits d'accès au service</h3>
            <div><strong>Coût:</strong> <code>{{service.Service_Fees}}</code></div>
            <div><strong>Contraintes d'accès:</strong> <code>{{service.Service_AccessConstraints}}</code></div>
        </div>
    </div>
    
    {{#layer}}
    <div id="window-{{Name}}" class="uk-modal">
        <div class="uk-modal-dialog">
            <a class="uk-modal-close uk-close"></a>
            <h3 class="uk-h4"><strong>Description du layer</strong></h3>
            {{#Name}}<div><strong>Nom:</strong> <code>{{Name}}</code></div>{{/Name}}
            {{#Title}}<div><strong>Titre:</strong> <code>{{Title}}</code></div>{{/Title}}
            {{#Abstract}}<div><strong>Résumé:</strong> <pre>{{Abstract}}</pre></div>{{/Abstract}}
            <div class="uk-thumbnail">
                <img width="200" src="{{ImgURL}}" alt="" style="max-height:200px; max-width:200px;">
            </div>
            <div><strong>Mots-clés:</strong>
                {{#Keywords}}
                    <code>{{Layer_Keyword}}</code>, 
                {{/Keywords}}
                {{^Keywords}}
                    <code>Aucun</code>
                {{/Keywords}}
            </div>
            <div><strong>Systèmes de projection:</strong>
                {{#CRS}}
                    <code>{{crs}}</code>, 
                {{/CRS}}
                {{^CRS}}
                    <code>Aucun</code>
                {{/CRS}}
            </div>
            {{#Extent}}
            <div><strong>Emprise (degrés décimaux):</strong> <code>{{Extent.s}}</code> | <code>{{Extent.n}}</code> | <code>{{Extent.w}}</code> | <code>{{Extent.e}}</code> </div>
            {{/Extent}}
            <div><strong>Métadonnées:</strong></div>
            <table class="uk-table">
                <tr>
                    <td><strong>Format</strong></td>
                    <td><strong>URL</strong></td>
                </tr>
                {{#MetadataURL}}
                <tr>
                    <td><code>{{format}}</code></td>
                    <td><a href="{{url}}">{{url}}</a></td>
                </tr>
                {{/MetadataURL}}
                {{^MetadataURL}}
                <tr>
                    <td>Non renseigné</td>
                    <td>Non renseigné</td>
                </tr>
                {{/MetadataURL}}
            </table>
            {{#Layer_MinScaleDenominator}}<div><strong>Echelle minimale de représentation:</strong> <code>{{Layer_MinScaleDenominator}}</code></div>{{/Layer_MinScaleDenominator}}
            {{#Layer_MaxScaleDenominator}}<div><strong>Echelle maximale de représentation:</strong> <code>{{Layer_MaxScaleDenominator}}</code></div>{{/Layer_MaxScaleDenominator}}

            {{#Layer_Attribution.title}}
            <h3 class="uk-h4">Attribution</h3>
            <div class="uk-grid uk-panel uk-grid-small uk-panel-box" style="margin-left: 5px;">
                <div class="uk-width-1-5">    
                    {{#Layer_Attribution.logoURL}}
                        <div> 
                            <img class="logo" src="{{Layer_Attribution.logoURL}}" alt="{{Layer_Attribution.logoURL}}" title="{{Layer_Attribution.logoURL}}" />
                        </div>
                    {{/Layer_Attribution.logoURL}}
                </div>
                <div class="uk-width-4-5">    
                    {{#Layer_Attribution.title}}<div><strong>Organisme: {{Layer_Attribution.title}}</strong></div>{{/Layer_Attribution.title}}
                    {{#Layer_Attribution.url}}<div>Site internet: <a href="{{Layer_Attribution.url}}">{{Layer_Attribution.url}}</a></div>{{/Layer_Attribution.url}}
                </div>
            </div>
            {{/Layer_Attribution.title}}
            
        </div>
    </div>
    {{/layer}}

</script>
